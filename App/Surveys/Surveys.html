<!-- ------------------------ -->
<!-- App/Surveys/Surveys.html -->
<!-- ------------------------ -->
<style>
  :root {
            --nav-height: 100px; /* Set the height of the nav element */
            --offset: 10px; /* Additional offset if needed */
        }
  #survey_interface {
    padding: 5px;
  }
  #save_survey_btn, #rename_survey_btn, #delete_survey_btn, #spreadsheet_preview_tabs, #add_item_btn, #branching_btn, #scoring_btn, #dm_h6_text {
    display: none;
  }
  #pills-tabContent_survey {
    height: 85vh;
    width: 81vw; 
    display: flex;
    flex-direction: column;
    padding: 20px 10px;
    margin-top: calc(var(--nav-height) + var(--offset));
  }
 
  #pills-preview_survey {
    flex: 1;
  }

  /* Make the iframe fill its parent div */
  #pills-preview_survey iframe {
    width: 100%;
    height: 100%;
    border: none;
  }
  #datamanipulations {
    padding-top: 5px;
    height: 40px;
  }
  #dm_h6_text{
    margin-top: 10px;
  }
  /* Controls the hover changes needed in the add item popup menu */
  #additemGrid .card:hover {
    cursor: pointer;
  }
  #additemGrid .card:hover .card-header {
    background-color: #007bff; /* Bootstrap primary blue */
    color: white;
  }
  #additemGrid .add_item_card_icon {
    fill: #000;
  }
  #additemGrid .card:hover .add_item_card_icon {
    fill: #fff;
  }
  button.btn-sm {
    box-shadow: none !important;
    border-style: none;
  }
  #detailsForm .form-group {
    padding-bottom: 10px;
  }
  .nav_survey_header {
    height: var(--nav-height);
  }
  .cell_spacer {
    width: 38%;
  }
</style>

<nav class="navbar navbar-primary bg-white fixed-top fixed-top-2 nav_survey_header">
  <table style="max-width: 100%">
    <tr>
      <td id="new_survey_button_td" class="cell_spacer">
        <button class="btn btn-outline-primary bi bi-file-earmark-plus" type="button" id="new_survey_button" title="Will create a new survey based on the one you have selected. Please select one of the existing surveys if you haven't already to be able to create a new survey based on it.">
          New Survey
        </button>
      </td>
      <td>
        <select id="survey_select" class="form-select" previousValue="">
          <option value="survey_select_label" disabled selected>Please select a survey</option>
        </select>
      </td>
      <td>
        <button id="save_survey_btn" class="btn btn-primary" previousvalue>Save</button>
        <button id="rename_survey_btn" class="btn btn-primary bi bi-pencil-fill">Rename</button>
        <button id="delete_survey_btn" class="btn btn-primary bi bi-trash">Delete</button>
      </td>
      <td id="spreadsheet_preview_tabs">
            <div class="btn-group" role="group">
              <button type="button" id="spreadsheet_tab_btn" class="btn btn-info bi bi-file-earmark-spreadsheet">Spreadsheet</button>
              <button type="button" id="preview_tab_btn" class="btn btn-outline-info bi bi-eye">Preview</button>
            </div>
      </td>
    </tr>
    <tr>
      <td id="datamanipulations" colspan="5">
        <h6 class="text-primary" id = "dm_h6_text">This is a default survey. Any changes you make will not be saved</h6>
        <button id="branching_btn" class="btn-sm btn-success" onclick="handleButtonPress('branching')">Branching</button>
        <button id="scoring_btn" class="btn-sm btn-success" onclick="handleButtonPress('scoring')">Scoring</button>
        <button id="add_item_btn" class="btn-sm btn-success">Add Item</button>
      </td>
    </tr>
  </table>
  
</nav>
<div class="tab-content" id="pills-tabContent_survey">
  <div class="tab-pane fade show active" id="pills-spreadsheet_survey" role="tabpanel" aria-labelledby="pills-spreadsheet-tab">
    <br />
    <div id="survey_HoT"></div>
  </div>
  <div class="tab-pane fade" id="pills-preview_survey" role="tabpanel" aria-labelledby="pills-preview-tab">
    <iframe id="survey_preview"></iframe>
  </div>
</div>

<script type="text/javascript" src="Surveys/wysiwyg/addItem.js"></script>
<script type="text/javascript" src="Surveys/wysiwyg/branching.js"></script>
<script type="text/javascript" src="Surveys/wysiwyg/scoring.js"></script>
<script type="text/javascript" src="Surveys/wysiwyg/icons.js"></script>
<script type="text/javascript" src="Surveys/SurveysFunctions.js"></script>
<script>
  var survey_HoT;
  var branching = 'branching';
  var scoring = 'scoring';

  /****************
   * Survey object *
   ****************/

  survey_obj = {
    save: function (survey_name, survey_content) {
        var write_response = CElectron.fs.write_file(
          "Surveys",
          survey_name,
          survey_content
        );
    },
  };

  if (typeof gitpod_surveys !== "undefined") {
    list_surveys();
  }

  main_page_icons()
</script>
<script type="text/javascript" src="Surveys/SurveysActions.js"></script>
