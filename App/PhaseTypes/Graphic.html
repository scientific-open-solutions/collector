<!-- --------------------------- -->
<!-- App/PhaseTypes/Graphic.html -->
<!-- --------------------------- -->
<!-- This only adjusts the styling within Collector,
     to adjust styling within the created phasetype or within the editor canvas,
     you need to update things in the graphic.js file  -->
<style>
  #gjs {
    width: 78vw!important;
  }
  .gjs-block{
    width:auto;
    height:auto;
    min-height:auto;
  }
</style>

<link rel="stylesheet" href="libraries/grapes.0.21.12.min.css">
<script src="libraries/grapes.0.21.12.min.js"></script>

<div id="gjs"></div>
<div id="blocks"></div>

<script type="text/javascript">
  var editor_grape = grapesjs.init({
      allowScripts: 1,
      container : '#gjs',
      components: '<div class="txt-red">Hello world!</div>',
      style: '.txt-red{color: red}',
      blockManager: {
        appendTo: '#blocks',
        storageManager: false,
        blocks: [
          {
            id: 'section', // id is mandatory
            label: '<b>Section</b>', // You can use HTML/SVG inside labels
            attributes: { class:'gjs-block-section' },
            content: `<section>
              <h1>This is a simple title</h1>
              <div>This is just a Lorem text: Lorem ipsum dolor sit amet</div>
            </section>`,
          }, {
            id: 'text',
            label: 'Text',
            content: '<div data-gjs-type="text">Insert your text here</div>',
          }, {
            id: 'image',
            label: 'Image',
            // Select the component once it's dropped
            select: true,
            // You can pass components as a JSON instead of a simple HTML string,
            // in this case we also use a defined component type `image`
            content: { type: 'image' },
            // This triggers `active` event on dropped components and the `image`
            // reacts by opening the AssetManager
            activate: true,
          }
        ]
      },
  });

/*
btnEdit.innerHTML = 'Edit';
btnEdit.className = pfx + 'btn-prim ' + pfx + 'btn-import';
btnEdit.onclick = function() {
    var code = codeViewer.editor_grape.getValue();
    editor_grape.DomComponents.getWrapper().set('content', '');
    editor_grape.setComponents(code.trim());
    modal.close();
};

cmdm.add('html-edit', {
    run: function(editor_grape, sender) {
        sender && sender.set('active', 0);
        var viewer = codeViewer.editor_grape;
        modal.setTitle('Edit code');
        if (!viewer) {
            var txtarea = document.createElement('textarea');
            container.appendChild(txtarea);
            container.appendChild(btnEdit);
            codeViewer.init(txtarea);
            viewer = codeViewer.editor_grape;
        }
        var InnerHtml = editor_grape.getHtml();
        var Css = editor_grape.getCss();
        modal.setContent('');
        modal.setContent(container);
        codeViewer.setContent(InnerHtml + "<style>" + Css + '</style>');
        modal.open();
        viewer.refresh();
    }
});

pnm.addButton('options',
    [
        {
            id: 'edit',
            className: 'fa fa-edit',
            command: 'html-edit',
            attributes: {
                title: 'Edit'
            }
        }
    ]
);
*/
</script>

<!-- THE TWO THINGS BELOW ARE OLD GRAPHICS THAT BREAKS COLLECTOR IF REMOVED -->
<iframe id="graphic_canvas" class="bg-white"></iframe>
<script src="PhaseTypes/Graphic.js"></script>
